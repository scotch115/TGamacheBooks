<!doctype html>
<html lang="{{ app()->getLocale() }}">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta property="og:title" content="T Gamache - Offical Site of the Author T Gamache" />
	<meta property="og:image" content="../images/notsocommoncover.png" />

	<!-- Need to do more research on loading data from firebase, possibly dynamic for number of articles? -->
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<script src="https://www.gstatic.com/firebasejs/3.3.2/firebase.js"></script>

	<title>T Gamache, Author - Official Site</title>

	</head>
	<body >
		<div class="floating-card">
			<div class="title">
				<hr />
				<a href="/">T Gamache</a>
				<hr />
				<p class="subtitle">
					Official Site of the Author T Gamache
				</p>
				<img class="profile-pic" alt="T Gamache-Author" src="https://tomgamachebooks.com/wp-content/uploads/2019/07/cropped-8A35A76C-FDDD-4B0D-88FA-5E50446D2BFB.jpeg" >
				<div class="social">
					<a href="https://www.facebook.com/tgamachebooks/" class="fa fa-facebook"></a>
					<a href="https://twitter.com/t_gamache" class="fa fa-twitter"></a>
					<a href="https://instagram.com/tgamache_books?igshid=5xlkb1vtjkeb" class=" fa fa-instagram"></a>
					<a href="mailto:tgamachebooks@gmail.com" class="fa fa-send"></a>
				</div>
			</div>
			<div class="linkContainer">
				<a style="color: black; padding: 0 25px; font-size: 15px; font-weight: 600; letter-spacing: .1rem;" href="about.html">About</a>
				<br />
				<a style="color: black; padding: 0 25px; font-size: 15px; font-weight: 600; letter-spacing: .1rem;" href="test.html">Blog</a>
				<br />
				<a style="color: black; padding: 0 25px; font-size: 15px; font-weight: 600; letter-spacing: .1rem;" href="https://www.amazon.com/T-Gamache/e/B07V3B924K/ref=dp_byline_cont_pop_book_1">Books</a>
			</div>
		</div>
		<div style="position: relative; left: 25vw; top: 1vw; font-size: 19px; font-weight: 300;">Blog:</div>
		<div id="blogDiv"></div>
	</body>
	<script>
			var config = {
				apiKey: "AIzaSyAuqXCgR7z4DgDmTOXWOyTJq_o0IO9NsLY",
				authDomain: "tomgamachebooks.firebaseapp.com",
				databaseURL: "https://tomgamachebooks.firebaseio.com",
				projectId: "tomgamachebooks",
				storageBucket: "tomgamachebooks.appspot.com",
				messagingSenderId: "233346595074"
			};
			firebase.initializeApp(config);

			var dbRef = firebase.database().ref('blogs');

			dbRef.on('value', gotData, errData);
			// TODO: Format blog div sizes (and inner text size) for Mobile
			// TODO: Research most efficient method for Dad to upload new blogs (potentially a web text editor with a user login page)
			// TODO: link db keys to files in posts folder, and create links within the div borders to open article full screen with a back button on top left
			
			function gotData(data) {
				// console.log(data.val());

				/* potentially look into some way to
				 * stop articles from loading multiple times.
				 * May not encounter this issue due to Firebase implemementation.
				*/
				var blogs = data.val();
				var keys = Object.keys(blogs);
				console.log(keys);

				for (var i = 0; i < keys.length; i++){
					var k = keys[i];
					var title = blogs[k].title;
					var articleBody = blogs[k].articleBody;
					// console.log(title, articleBody);
					var article = document.createElement("blogDiv");
					article.innerHTML += "<h2>"+blogs[k].title+"</h2>";
					article.innerHTML += "<p>"+blogs[k].articleBody+"<p>";
					article.setAttribute('class', 'blogDiv');
					document.body.appendChild(article);
				}
			}

			function errData(err) {
				console.log("Error: " +err);
			}
	</script>
</html>
